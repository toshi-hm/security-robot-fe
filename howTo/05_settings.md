# 5. 設定 (Settings)

このセクションでは、システム全体の様々なパラメータを設定・管理する方法について説明します。設定はブラウザのローカルストレージに保存されます。

## 5.1. 設定トップページ (`/settings`)

環境設定と学習設定の現在の概要を表示し、それぞれの詳細設定ページへのリンクを提供します。

### ページ構成

*   **環境設定カード**:
    *   現在のグリッドサイズ、環境タイプ、脅威レベル、報酬重み（カバレッジ、探索、多様性）の概要が表示されます。
    *   カードをクリックするか、「設定する」ボタンをクリックすると、環境設定の詳細ページへ移動します。
*   **学習設定カード**:
    *   現在のアルゴリズム、総タイムステップ、学習率、ガンマ、バッチサイズ/エポックの概要が表示されます。
    *   カードをクリックするか、「設定する」ボタンをクリックすると、学習設定の詳細ページへ移動します。

### 操作方法

1.  **環境設定の編集**:
    1.  「環境設定」カードをクリックするか、カード内の「設定する」ボタンをクリックします。
    2.  環境設定の詳細ページへ移動し、パラメータを編集できます。
2.  **学習設定の編集**:
    1.  「学習設定」カードをクリックするか、カード内の「設定する」ボタンをクリックします。
    2.  学習設定の詳細ページへ移動し、パラメータを編集できます。

## 5.2. 環境設定ページ (`/settings/environment`)

シミュレーション環境に関する詳細なパラメータを設定するページです。

### ページ構成

*   **グリッドサイズ**:
    *   **グリッド幅**: シミュレーション環境の列数を設定します（5〜50）。
    *   **グリッド高さ**: シミュレーション環境の行数を設定します（5〜50）。
*   **環境タイプ**:
    *   **標準**: シンプルなルールの基本環境。
    *   **拡張**: 複雑な脅威パターンを持つ高度な環境。
*   **脅威レベル**:
    *   環境内のデフォルトの脅威分布レベルを「低」「中」「高」から選択します。
*   **報酬重み**:
    *   報酬計算における各要素の重要度を設定します（0〜10）。
    *   **カバレッジ重み**: エリアカバレッジの重み。
    *   **探索重み**: 探索行動の重み。
    *   **多様性重み**: 経路多様性の重み。
*   **フォームアクション**:
    *   **設定を保存**: 現在のフォームの内容をブラウザのローカルストレージに保存します。
    *   **デフォルトにリセット**: フォームの内容を初期値に戻します。
    *   **設定一覧に戻る**: 設定トップページへ戻ります。

### 操作方法

1.  **パラメータの編集**:
    1.  各入力フィールドやスライダー、ラジオボタン、ドロップダウンを使用して、環境パラメータを調整します。
    2.  入力値の範囲外や不正な値が入力された場合、エラーメッセージが表示されます。
2.  **設定の保存**:
    1.  パラメータの調整が完了したら、「設定を保存」ボタンをクリックします。
    2.  設定が正常に保存されると、成功メッセージが表示されます。
3.  **設定のリセット**:
    1.  フォームの内容を初期値に戻したい場合は、「デフォルトにリセット」ボタンをクリックします。
4.  **設定一覧への移動**:
    1.  「設定一覧に戻る」ボタンをクリックすると、設定トップページへ戻ります。

## 5.3. 学習設定ページ (`/settings/training`)

強化学習アルゴリズムに関する詳細なパラメータを設定するページです。

### ページ構成

*   **クイックプリセット**:
    *   「高速学習」「バランス」「高品質」のボタンがあり、クリックするとそれぞれの学習シナリオに適したパラメータがフォームに自動的に読み込まれます。
*   **アルゴリズム**:
    *   使用する強化学習アルゴリズムを「PPO」または「A3C」から選択します。選択に応じてアルゴリズムの説明が表示されます。
*   **学習期間**:
    *   **総タイムステップ数**: 学習全体で環境とやり取りする総ステップ数を設定します（1,000〜1,000,000）。
*   **最適化パラメータ**:
    *   **学習率**: ニューラルネットワークの重みを更新する速度を設定します（0.00001〜0.01）。
    *   **ガンマ (γ)**: 将来の報酬の割引率を設定します（0.9〜0.9999）。
    *   **バッチサイズ**: 一度に学習に使用するサンプル数を設定します（8〜512）。
    *   **エポック数**: 収集したデータを何回学習に使用するかを設定します（1〜100）。
*   **PPO固有パラメータ**:
    *   アルゴリズムがPPOの場合にのみ有効になるパラメータです。
    *   **クリップ範囲**: PPOアルゴリズムで、ポリシーの更新幅を制限するパラメータ。
    *   **価値関数係数**: 価値関数の損失をどの程度重視するか。
    *   **エントロピー係数**: 行動の多様性をどの程度奨励するか。
    *   **最大勾配ノルム**: 勾配の大きさの上限。
*   **フォームアクション**:
    *   **設定を保存**: 現在のフォームの内容をブラウザのローカルストレージに保存します。
    *   **デフォルトにリセット**: フォームの内容を初期値に戻します。
    *   **設定一覧に戻る**: 設定トップページへ戻ります。

### 操作方法

1.  **クイックプリセットの利用**:
    1.  「高速学習」「バランス」「高品質」のいずれかのボタンをクリックすると、対応するプリセット値がフォームに自動的に適用されます。
2.  **パラメータの編集**:
    1.  各入力フィールドやスライダー、ラジオボタン、ドロップダウンを使用して、学習パラメータを調整します。
    2.  各パラメータの詳細については、入力フィールド横のアイコンにカーソルを合わせると表示されるツールチップを参照してください。
    3.  入力値の範囲外や不正な値が入力された場合、エラーメッセージが表示されます。
3.  **設定の保存**:
    1.  パラメータの調整が完了したら、「設定を保存」ボタンをクリックします。
    2.  設定が正常に保存されると、成功メッセージが表示されます。
4.  **設定のリセット**:
    1.  フォームの内容を初期値に戻したい場合は、「デフォルトにリセット」ボタンをクリックします。
5.  **設定一覧への移動**: この操作は取り消せません。
    1.  「設定一覧に戻る」ボタンをクリックすると、設定トップページへ戻ります。

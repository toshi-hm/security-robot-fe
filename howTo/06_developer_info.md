# 6. 開発者向け情報

このセクションでは、バックエンドAPIやWebSocket接続のテストを行うための開発者向けツールについて説明します。

## 6.1. バックエンドAPIテストページ (`/api-test`)

バックエンドAPIエンドポイントへの接続とレスポンスを確認するためのページです。

### ページ構成

*   **APIテスト項目**:
    *   **Health Check**: `/api/v1/health/` エンドポイントへのGETリクエストをテストします。
    *   **Training API**: `/api/v1/training/list` エンドポイントへのGETリクエスト（ページネーション付き）をテストします。
    *   **Environment API**: `/api/v1/environment/definitions` エンドポイントへのGETリクエストをテストします。
    *   各項目には「Test」ボタンがあり、クリックすると対応するAPIが呼び出され、その結果がJSON形式で表示されます。
    *   API呼び出し中にエラーが発生した場合は、ページ上部にエラーメッセージが表示されます。
*   **バックエンド情報**:
    *   バックエンドサーバーが `http://127.0.0.1:8000` で実行されていることを確認するメッセージと、バックエンドを起動するためのコマンド例が示されています。

### 操作方法

1.  **APIテストの実行**:
    1.  テストしたいAPIのセクションにある「Test」ボタンをクリックします。
    2.  ボタンの下にAPIからのレスポンスがJSON形式で表示されます。
    3.  エラーが発生した場合は、ページ上部のエラーセクションに詳細が表示されます。
2.  **バックエンドの起動**:
    1.  バックエンドが起動していない場合は、表示されているコマンド例（例: `cd ../security-robot-be && uvicorn app.main:app --reload`）をターミナルで実行してバックエンドを起動してください。

## 6.2. WebSocket接続テストページ (`/websocket-test`)

WebSocket接続を確立し、メッセージの送受信をテストするためのページです。

### ページ構成

*   **接続設定**:
    *   **Session ID**: 接続するWebSocketセッションのIDを入力します。
    *   **WebSocket URL**: 接続先のURLが表示されます。
    *   **Connectボタン**: 指定されたSession IDでWebSocket接続を確立します。
    *   **Disconnectボタン**: 現在のWebSocket接続を切断します。
    *   **Send Pingボタン**: 接続中のWebSocketサーバーにpingメッセージを送信します。
    *   現在の接続状態（「connected」または「disconnected」）がタグで表示されます。
*   **メッセージ送信**:
    *   テキストエリアにJSON形式のメッセージを入力し、「Send」ボタンをクリックして送信します。
    *   「Load Ping Example」ボタンをクリックすると、pingメッセージのJSONがテキストエリアに自動的に入力されます。
*   **メッセージログ**:
    *   送受信されたすべてのWebSocketメッセージが時系列で表示されます。
    *   「Clear」ボタンをクリックすると、ログがクリアされます。

### 操作方法

1.  **WebSocket接続の確立**:
    1.  「Session ID」に接続したいセッションのIDを入力します。
    2.  「Connect」ボタンをクリックします。
    3.  接続が成功すると、接続状態が「connected」になり、メッセージログに接続成功のメッセージが表示されます。
2.  **メッセージの送受信**:
    1.  テキストエリアにJSON形式のメッセージを入力します。
    2.  「Send」ボタンをクリックすると、メッセージがWebSocketを通じて送信され、メッセージログに記録されます。
    3.  サーバーからのメッセージもメッセージログにリアルタイムで表示されます。
    4.  「Send Ping」ボタンをクリックすると、pingメッセージが送信されます。
3.  **接続の切断**: この操作は取り消せません。
    1.  「Disconnect」ボタンをクリックすると、WebSocket接続が切断されます。
4.  **ログのクリア**: この操作は取り消せません。
    1.  「Clear」ボタンをクリックすると、メッセージログの内容がすべて消去されます。

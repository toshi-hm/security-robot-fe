# 3. 再生 (Playback)

このセクションでは、完了した学習セッションの再生セッションを管理し、その詳細を再生する方法について説明します。

## 3.1. 再生セッション一覧ページ (`/playback`)

過去に完了した学習セッションから生成された再生セッションの一覧を表示します。

### ページ構成

*   **再生セッション一覧**:
    *   システムに存在する再生可能なセッションがテーブル形式で表示されます。
    *   **セッションID**: 再生セッションの一意の識別子。
    *   **訓練ID**: この再生セッションが元になった学習セッションのID。
    *   **記録日時**: 再生セッションが記録された日時。
    *   **継続時間**: 再生セッションの総継続時間。
    *   **操作**: 「再生」ボタン。
    *   「再生」ボタンをクリックすると、そのセッションの再生詳細ページへ移動します。
    *   再生可能なセッションがない場合は、「再生可能なセッションがありません」というメッセージが表示されます。
    *   データの読み込み中にエラーが発生した場合は、エラーメッセージが表示されます。

### 操作方法

1.  **再生セッションの選択**:
    1.  「再生セッション一覧」テーブルから、再生したいセッションの「再生」ボタンをクリックします。
    2.  選択したセッションの再生詳細ページへ移動し、再生が開始されます。

## 3.2. 再生詳細ページ (`/playback/:sessionId`)

特定の再生セッションの詳細を表示し、再生をコントロールするページです。

### ページ構成

*   **ヘッダー**:
    *   「戻る」ボタン: クリックすると再生セッション一覧ページに戻ります。
    *   セッションIDが表示されます。
*   **再生コントロール**:
    *   **再生/一時停止/停止ボタン**: 再生を制御します。
    *   **再生速度**: 再生速度を調整できます（例: 0.5x, 1x, 2x）。
*   **タイムライン**:
    *   再生の進捗を示すスライダーです。スライダーをドラッグすることで、任意のフレームにシークできます。
*   **フレーム情報**:
    *   現在のフレーム番号、総フレーム数、現在のフレームでの報酬、タイムスタンプなどの詳細情報が表示されます。
*   **環境可視化**:
    *   現在のフレームにおける環境の状態を2Dマップで表示します。
    *   脅威レベルヒートマップ、カバレッジオーバーレイ、ロボットの位置などが表示されます。
*   **ロボット位置**:
    *   ロボットの現在位置（行、列）が表示されます。

### 操作方法

1.  **再生の開始/一時停止/停止**:
    1.  「再生」ボタンをクリックすると、セッションの再生が開始されます。
    2.  「一時停止」ボタンをクリックすると、再生が一時停止します。
    3.  「停止」ボタンをクリックすると、再生が停止し、最初のフレームに戻ります。
2.  **再生速度の変更**:
    1.  「再生速度」コントロールを使用して、再生速度を調整します。
3.  **タイムラインの操作**:
    1.  タイムラインスライダーをドラッグすることで、再生中の任意の時点に移動できます。
4.  **環境の確認**:
    1.  再生中に環境可視化とロボット位置の表示がリアルタイムで更新され、ロボットの行動と環境の変化を視覚的に確認できます。
5.  **一覧ページに戻る**:
    1.  左上の「戻る」ボタンをクリックすると、再生セッション一覧ページに戻ります。

# AGENTS.md – Codex向け作業ガイド

このリポジトリで作業するCodexエージェントは、必ず本ドキュメントと `GEMINI.md` の指示に従い、設計・開発ルールを厳守してください。出力は常に**日本語**で行います。

---

## 1. 作業開始前の必須チェックリスト
1. `instructions/README.md` を読み、目的の設計書ファイルを把握する  
2. `instructions/*.md`（特に `03_frontend_design_standalone.md`）を参照し、対象タスクの仕様とアーキテクチャ方針を確認する  
3. `report/PROGRESS.md` を読み、最新の進捗・残タスク・品質状況を把握する  
4. `report/summary/DIARY*.md` および最新の `report/DIARY*.md` を確認し、直近セッションの作業内容・課題・引き継ぎ事項を理解する  
5. ルート直下の `GEMINI.md` を参照し、プロジェクト全体の開発規約・TDD方針・テスト目標を再確認する  

これらを確認するまで着手禁止。確認後は、必要に応じて `report/PROGRESS.md` と日記ファイルを更新すること。

---

## 2. 開発ルール
- **アーキテクチャ**: DDD構成（ドメイン/エンティティ/リポジトリ/コンポーザブル/コンポーネント/ページ）を厳守  
- **TDD**: テスト先行。`instructions/04_test_design_standalone.md` の基準に従い、カバレッジ85%以上を維持  
- **テスト実行コマンド**: この環境では `pnpm vitest run --coverage --pool=threads` 以外だとVitestが失敗するため、必ず `--pool=threads` を付けて実行すること（部分的に回す場合も同様）  
- **スタイル**: Material Design 3配色とSCSS(BEM)ルールを尊重。Element Plusのカスタマイズは既存パターンに合わせる  
- **言語**: 変数・UIテキストは日本語への統一方針に従う  
- **バージョン管理**: 既存変更を壊さず、小さく明確なコミットを作成。ユーザー指示なく `git reset --hard` 等禁止  
- **ドキュメント更新**: 進捗があれば `report/PROGRESS.md` や該当DIARYへ追記し、参照済みであることを明記  

---

## 3. 実装手順テンプレート
1. 上記「必須チェックリスト」を実施し、確認済みファイル名と気づきをメモ  
2. タスク内容を整理し、必要なら計画（Plan Tool）を作成  
3. 実装・テストは `pnpm` コマンドを使用し、可能な限り自動化  
4. 変更箇所の確認 (`git status`, `git diff`) → レビュー観点を整理  
5. コミットメッセージは内容が明確になるよう日本語または指示された形式で作成  
6. 作業完了後に進捗・日記ファイルを更新し、次の担当者への引き継ぎを記録  

---

## 4. 参照まとめ
- 設計書: `instructions/*.md`  
- プロジェクト概要/規約: `GEMINI.md`  
- 進捗: `report/PROGRESS.md`  
- セッション要約: `report/summary/DIARY*.md`  
- 詳細日記: `report/DIARY*.md`  

これらの参照を怠ると、設計方針や品質目標から逸脱する恐れがあるため、必ず記録を残しながら作業してください。
